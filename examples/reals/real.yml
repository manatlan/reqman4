#RESULT: 34/35
# this is a real test, need access to the internet !

color:
  return f"<b style='color:orange'>{x}</b>"

RUN:
  - GET: https://tools-httpstatus.pickup-services.com/500
    doc: this is the documentation of the test ... time in ms = <b><i><<R.time>></i></b>
    tests:
     - R.status == 500
     - R.time < 500

  - GET: https://tools-httpstatus.pickup-services.com/200
    doc: this is the documentation of the test ... time in ms = <b><i><<R.time>></i></b>
    tests:
     - R.status == 200
     - R.time < 500

  - POST: https://tools-httpstatus.pickup-services.com/201
    doc: |
      this is the documentation of the test ... time in ms = <b><i><<R.time>></i></b>
      <p>Got a False Test ! (to test ;-))</p>
    body:
      item:
        id: 42
        label: toto
    tests:
     - R.status == 201
     - R.status == 202  # to make a false test
     - R.time < 500

  - GET: https://tools-httpstatus.pickup-services.com/unknown
    tests:
      - R.status == 404
      - R.headers.server == "pickup-webserver"

  - GET: https://tools-httpstatus.pickup-services.com/200?sleep=1000
    doc: Test <<color('ResponseTimeout')>>, with a timeout=<<timeout>>ms
    tests:
      - R.status == 0        
      - R.text == ""
      - R.content == b""
      - not R.headers
      - timeout < R.time < 1000
      - "'timeout' in locals()"      
    params:
      - timeout: 500 #ms


  - GET: https://unknownnnxsqcsqd.com/toto
    doc: Test <<color('ResponseUnreachable')>>
    tests:
      - R.status == 0   
      - R.text == ""
      - R.content == b""
      - not R.headers
      - 0 < R.time < 100
      - "'timeout' not in locals()"

  - GET: https:/unknownnnxsqcsqd.com/toto
    doc: Test <<color('ResponseInvalid')>>
    tests:
      - R.status == 0    
      - R.text == ""
      - R.content == b""
      - not R.headers
      - 0 < R.time < 10
      - "'timeout' not in locals()"         

  - GET: "https://tools-httpstatus.pickup-services.com/<<xxx>>"
    doc: ... xxx == <<xxx>> ... 
    tests:
     - R.status == xxx
    params: <<[dict(xxx=j) for j in range(201,209)]>>